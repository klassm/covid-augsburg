(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{261:function(e,n,t){},421:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(21),c=t.n(i),o=(t(261),t(27)),s=t(453),u=t(476),l=t(124),d=t(46),f=t(24),p=t.n(f),j=t(39),b=t(455),h=t(457),O=t(458),g=t(459),v=t(460),x=t(461),m=t(472),w=t(463),y=t(464),k=t(140),S=t(478),I=t(220),C=t.n(I),N=t(219),L=t.n(N),W=t(81),P=t(137),R=t(162),A=t.n(R),D=t(477),z="https://raw.githubusercontent.com/klassm/covid-historie/master/rki-scrape/data";function B(){return Object(D.a)("available-regions",T)}function T(){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(z,"/regions.json"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return M.apply(this,arguments)}function M(){return(M=Object(j.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(z,"/").concat(n,".json"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=t(243),_=t(163),J=t.n(_),U=t(479),G="regions",Q=["09761","09772"],H="user-regions";function V(){return Object(D.a)(H,$)}function q(e){J.a.set(G,JSON.stringify(e),{sameSite:"lax",expires:3650})}function $(){var e=J.a.get(G);return e?JSON.parse(e):Q}var X=t(6),Y=Object(s.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),Z=function(e){var n=e.onClose,t=Y(),r=B().data,a=V().data,i=function(){var e=Object(l.b)();return Object(U.a)(function(){var e=Object(j.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.rs,q($().filter((function(e){return t!==e})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSettled:function(){return e.invalidateQueries(H)}})}().mutateAsync,c=function(){var e=Object(l.b)();return Object(U.a)(function(){var e=Object(j.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(n.newRegions);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSettled:function(){return e.invalidateQueries(H)}})}().mutateAsync;function s(e,n,t){var r=Array.from(e),a=r.splice(n,1),i=Object(o.a)(a,1)[0];return r.splice(t,0,i),r}function u(e){return f.apply(this,arguments)}function f(){return(f=Object(j.a)(p.a.mark((function e(n){var t,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.source,r=n.destination){e.next=3;break}return e.abrupt("return");case 3:return i=s(null!==a&&void 0!==a?a:[],t.index,r.index),e.next=6,c({newRegions:i});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(X.jsxs)(m.a,{fullScreen:!0,open:!0,onClose:n,children:[Object(X.jsx)(w.a,{className:t.appBar,children:Object(X.jsxs)(y.a,{children:[Object(X.jsx)(v.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(X.jsx)(C.a,{})}),Object(X.jsx)(k.a,{variant:"h6",className:t.title,children:"Kreise verwalten"})]})}),function(){if(!r||!a)return Object(X.jsx)(b.a,{});var e=Object(W.keyBy)(r,(function(e){return e.rs})),n=a.map((function(n){return e[n]})),t=h.a,c=n.map((function(e,n){return Object(X.jsx)(P.b,{draggableId:e.rs,index:n,children:function(n){return Object(X.jsxs)(t,Object(d.a)(Object(d.a)(Object(d.a)({ContainerComponent:"li",ContainerProps:{ref:n.innerRef}},n.draggableProps),n.dragHandleProps),{},{children:[Object(X.jsx)(O.a,{primary:e.name}),Object(X.jsx)(g.a,{children:Object(X.jsx)(v.a,{edge:"end","aria-label":"delete",onClick:Object(j.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",i({rs:e.rs}));case 1:case"end":return n.stop()}}),n)}))),children:Object(X.jsx)(L.a,{})})})]}))}},e.rs)}));return Object(X.jsx)(P.a,{onDragEnd:u,children:Object(X.jsx)(P.c,{droppableId:"rs_droppable",children:function(e){return Object(X.jsx)(S.a,{rootRef:e.innerRef,children:Object(X.jsxs)(x.a,{dense:!0,children:[c,e.placeholder]})})}})})}()]})},ee=t(244),ne=t(86),te=t(25),re=t(475),ae=t(221),ie=t.n(ae),ce=t(223),oe=t.n(ce),se=t(474),ue=Object(s.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(ne.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(ne.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(te.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(te.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ne.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"20ch","&:focus":{width:"30ch"}})}})),le=function(e){var n=e.showAdministerDialog,t=ue(),a=B().data,i=function(){var e=Object(l.b)();return Object(U.a)(function(){var e=Object(j.a)(p.a.mark((function e(n){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.rs,r=Object(W.uniq)([].concat(Object(F.a)($()),[t])),e.next=4,q(r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSettled:function(){return e.invalidateQueries(H)}})}().mutateAsync,c=Object(r.useState)(""),s=Object(o.a)(c,2),u=s[0],f=s[1],b=null!==a&&void 0!==a?a:[];function h(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(""),null===n){e.next=4;break}return e.next=4,i(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(X.jsx)("div",{className:t.root,children:Object(X.jsx)(w.a,{children:Object(X.jsxs)(y.a,{children:[Object(X.jsx)(k.a,{variant:"h6",noWrap:!0,className:t.title,children:"COVID Historie"}),Object(X.jsxs)("div",{className:t.search,children:[Object(X.jsx)("div",{className:t.searchIcon,children:Object(X.jsx)(ie.a,{})}),Object(X.jsx)(se.a,{id:"rs-select",style:{width:300},inputValue:u,disableListWrap:!0,getOptionLabel:function(e){return e.name},options:b,clearOnBlur:!0,onChange:function(){var e=Object(j.a)(p.a.mark((function e(n,t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(t));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),renderInput:function(e){e.InputLabelProps,e.InputProps;var n=Object(ee.a)(e,["InputLabelProps","InputProps"]);return Object(X.jsx)(re.a,Object(d.a)(Object(d.a)(Object(d.a)({placeholder:"Kreis hinzuf\xfcgen\u2026",onChange:function(e){return f(e.target.value)}},e.InputProps),n),{},{classes:{root:t.inputRoot,input:t.inputInput}}))},renderOption:function(e){return Object(X.jsx)(k.a,{noWrap:!0,children:e.name})}})]}),Object(X.jsx)(v.a,{"aria-label":"display more actions",edge:"end",color:"inherit",onClick:n,children:Object(X.jsx)(oe.a,{})})]})})})},de=t(471),fe=t(480),pe=t(465),je=t(466),be=t(470),he=t(240),Oe=t(241),ge=t(245),ve=t(239),xe=t(237),me=Object(s.a)((function(){return Object(fe.a)({body:{padding:5}})}));var we=[void 0,"#fefac0","#f6c97a","#ec925b","#dc543f","#ac3135"];function ye(e){return e>100?Math.ceil(e):Math.ceil(10*e)/10}var ke=function(e){var n=e.rs,t=e.entriesToShow,r=me(),a=function(e){return Object(D.a)([e,"region"],Object(j.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",K(e));case 1:case"end":return n.stop()}}),n)}))))}(n).data;if(!a)return null;var i=Object(W.takeRight)(a.entries,t).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{date:e.date.split(".").slice(0,2).join(".")})})).map((function(e){return{date:e.date,incidence:e.incidence,color:(t=e.incidence,we[function(e){return e>200?5:e>100?4:e>50?3:e>35?2:1}(t)]),casesDiff:(n=e.casesDiff,void 0===n||0===n?"":n>0?"+".concat(n):"-".concat(Math.abs(n))),formattedIncidence:ye(e.incidence)};var n,t}));return Object(X.jsxs)("div",{className:r.body,children:[Object(X.jsx)("h3",{children:a.name}),Object(X.jsx)(pe.a,{height:300,children:Object(X.jsxs)(je.a,{data:i,margin:{top:5,right:5,left:10,bottom:5},children:[Object(X.jsx)(be.a,{strokeDasharray:"3 3"}),Object(X.jsx)(he.a,{tick:{fontSize:12},dataKey:"date"}),Object(X.jsx)(Oe.a,{tick:{fontSize:10},width:18}),Object(X.jsx)(ge.a,{dataKey:"incidence",children:i.map((function(e,n){return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ve.a,{fill:e.color},"cell-".concat(n)),Object(X.jsx)(xe.a,{dataKey:"casesDiff",position:"top",fill:"#000000",fontSize:12}),Object(X.jsx)(xe.a,{dataKey:"formattedIncidence",position:"insideBottom",fill:"#000000",fontSize:12})]})}))})]})})]})},Se=Object(s.a)((function(){return{loadingIndicator:{display:"flex",justifyContent:"center",marginTop:30}}})),Ie=function(){var e=Se(),n=Object(r.useState)(window.innerWidth),t=Object(o.a)(n,2),a=t[0],i=t[1];Object(r.useEffect)((function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}));var c=B().data,s=V().data,u=function(){i(window.innerWidth)},l=Math.max(a/40,7);if(!c||!s)return Object(X.jsx)("div",{className:e.loadingIndicator,children:Object(X.jsx)(de.a,{size:80})});var d=s.filter((function(e){return c.some((function(n){return n.rs===e}))})).map((function(e){return Object(X.jsx)(ke,{rs:e,entriesToShow:l},"region_".concat(e))}));return Object(X.jsx)("div",{children:d})},Ce=new u.a,Ne=Object(s.a)((function(){return{body:{margin:10,marginTop:80},footer:{fontSize:"0.5m",textAlign:"center"}}})),Le=function(){var e=Ne(),n=Object(r.useState)(!1),t=Object(o.a)(n,2),a=t[0],i=t[1];return Object(X.jsxs)(l.a,{client:Ce,children:[a?Object(X.jsx)(Z,{onClose:function(){return i(!1)}}):null,Object(X.jsx)(le,{showAdministerDialog:function(){return i(!0)}}),Object(X.jsxs)("div",{className:e.body,children:[Object(X.jsx)("div",{children:Object(X.jsx)(Ie,{})}),Object(X.jsxs)("p",{className:e.footer,children:["Die auf dieser Seite angezeigten Daten stammen vom ",Object(X.jsx)("a",{href:"https://npgeo-corona-npgeo-de.hub.arcgis.com/datasets/917fc37a709542548cc3be077a786c17_0/geoservice?geometry=-30.849%2C46.211%2C52.867%2C55.839",target:"_blank",rel:"noreferrer",children:"RKI"}),"."]})]})]})},We=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Re=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,481)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(Le,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/covid-historie",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/covid-historie","/service-worker.js");We?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pe(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Pe(n,e)}))}}({onUpdate:function(e){e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}),Re()}},[[421,1,2]]]);
//# sourceMappingURL=main.e1bc373a.chunk.js.map