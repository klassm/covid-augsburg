(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{134:function(e,n,t){},179:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(15),i=t.n(c),o=(t(134),t(70)),s=t(209),u=t(225),l=t(64),d=t(13),p=t.n(d),j=t(20),f=t(211),b=t(213),h=t(214),O=t(215),g=t(216),v=t(217),x=t(222),m=t(219),w=t(220),y=t(71),k=t(115),I=t.n(k),C=t(84),S=t.n(C),L=t(226),W="https://raw.githubusercontent.com/klassm/covid-augsburg/master/rki-scrape/data";function N(){return Object(L.a)("available-regions",A)}function A(){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(W,"/regions.json"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(W,"/").concat(n,".json"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=t(120),D=t(85),E=t.n(D),F=t(65),J=t(227),M="regions",U=["09761","09772"],G="user-regions";function K(){return Object(L.a)(G,V)}function Q(e){E.a.set(M,JSON.stringify(e),{sameSite:"lax",expires:3650})}function V(){var e=E.a.get(M);return e?JSON.parse(e):U}var X=t(114),_=t.n(X),q=t(6),z=Object(s.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),H=function(e){var n=e.onClose,t=z(),r=N().data,a=K().data,c=function(){var e=Object(l.b)();return Object(J.a)(function(){var e=Object(j.a)(p.a.mark((function e(n){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.rs,Q(V().filter((function(e){return t!==e})));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSettled:function(){return e.invalidateQueries(G)}})}().mutateAsync;return Object(q.jsxs)(x.a,{fullScreen:!0,open:!0,onClose:n,children:[Object(q.jsx)(m.a,{className:t.appBar,children:Object(q.jsxs)(w.a,{children:[Object(q.jsx)(g.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(q.jsx)(I.a,{})}),Object(q.jsx)(y.a,{variant:"h6",className:t.title,children:"Kreise verwalten"})]})}),function(){if(!r||!a)return Object(q.jsx)(f.a,{});var e=Object(F.keyBy)(r,(function(e){return e.rs})),n=a.map((function(n){return e[n]})).map((function(e){return Object(q.jsxs)(b.a,{children:[Object(q.jsx)(h.a,{primary:e.name}),Object(q.jsx)(O.a,{children:Object(q.jsx)(g.a,{edge:"end","aria-label":"delete",onClick:Object(j.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",c({rs:e.rs}));case 1:case"end":return n.stop()}}),n)}))),children:Object(q.jsx)(_.a,{})})})]})}));return Object(q.jsx)(v.a,{dense:!0,children:n})}()]})},$=t(36),Y=t(121),Z=t(43),ee=t(11),ne=t(224),te=t(116),re=t.n(te),ae=t(118),ce=t.n(ae),ie=t(223),oe=Object(s.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(Z.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(Z.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ee.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ee.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Z.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"20ch","&:focus":{width:"30ch"}})}})),se=function(e){var n=e.showAdministerDialog,t=oe(),a=N().data,c=function(){var e=Object(l.b)();return Object(J.a)(function(){var e=Object(j.a)(p.a.mark((function e(n){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.rs,r=Object(F.uniq)([].concat(Object(R.a)(V()),[t])),e.next=4,Q(r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSettled:function(){return e.invalidateQueries(G)}})}().mutateAsync,i=Object(r.useState)(""),s=Object(o.a)(i,2),u=s[0],d=s[1],f=null!==a&&void 0!==a?a:[];function b(e){return h.apply(this,arguments)}function h(){return(h=Object(j.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(""),null===n){e.next=4;break}return e.next=4,c(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(q.jsx)("div",{className:t.root,children:Object(q.jsx)(m.a,{children:Object(q.jsxs)(w.a,{children:[Object(q.jsx)(y.a,{variant:"h6",noWrap:!0,className:t.title,children:"COVID Historie"}),Object(q.jsxs)("div",{className:t.search,children:[Object(q.jsx)("div",{className:t.searchIcon,children:Object(q.jsx)(re.a,{})}),Object(q.jsx)(ie.a,{id:"rs-select",style:{width:300},inputValue:u,disableListWrap:!0,getOptionLabel:function(e){return e.name},options:f,clearOnBlur:!0,onChange:function(){var e=Object(j.a)(p.a.mark((function e(n,t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(t));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),renderInput:function(e){e.InputLabelProps,e.InputProps;var n=Object(Y.a)(e,["InputLabelProps","InputProps"]);return Object(q.jsx)(ne.a,Object($.a)(Object($.a)(Object($.a)({placeholder:"Kreis hinzuf\xfcgen\u2026",onChange:function(e){return d(e.target.value)}},e.InputProps),n),{},{classes:{root:t.inputRoot,input:t.inputInput}}))},renderOption:function(e){return Object(q.jsx)(y.a,{noWrap:!0,children:e.name})}})]}),Object(q.jsx)(g.a,{"aria-label":"display more actions",edge:"end",color:"inherit",onClick:n,children:Object(q.jsx)(ce.a,{})})]})})})},ue=t(221),le=t(228),de=t(26),pe=(t(178),Object(s.a)((function(){return Object(le.a)({body:{padding:5}})})));var je=["","#fefac0","#f6c97a","#ec925b","#dc543f","#ac3135"];var fe=function(e){var n=e.rs,t=pe(),r=function(e){return Object(L.a)([e,"region"],Object(j.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",T(e));case 1:case"end":return n.stop()}}),n)}))))}(n).data;if(!r)return null;var a=window.innerWidth-20,c=r.entries.slice(r.entries.length-10,r.entries.length).map((function(e){return Object($.a)(Object($.a)({},e),{},{date:e.date.split(".").slice(0,2).join(".")})})),i=c.map((function(e){return{x:e.date,y:e.incidence,color:(n=e.incidence,n>200?5:n>100?4:n>50?3:n>35?2:1)};var n})),o=c.map((function(e){return{x:e.date,y:e.incidence+15,label:(n=e.casesDiff,void 0===n||0===n?"":n>0?"+".concat(n):"-".concat(Math.abs(n)))};var n})),s=c.map((function(e){return{x:e.date,y:0,label:"".concat(Math.ceil(e.incidence))}}));return Object(q.jsxs)("div",{className:t.body,children:[Object(q.jsx)("h3",{children:r.name}),Object(q.jsxs)(de.f,{height:300,width:a,xType:"ordinal",children:[Object(q.jsx)(de.d,{}),Object(q.jsx)(de.a,{}),Object(q.jsx)(de.e,{}),Object(q.jsx)(de.g,{}),Object(q.jsx)(de.c,{colorType:"log",data:i,barWidth:.8,colorRange:je,colorDomain:[0,1,2,3,4]}),Object(q.jsx)(de.b,{data:o,xType:"ordinal",labelAnchorX:"middle"}),Object(q.jsx)(de.b,{data:s,xType:"ordinal",labelAnchorX:"middle"})]})]})},be=function(){var e=N().data,n=K().data;if(!e||!n)return Object(q.jsx)(ue.a,{});var t=n.filter((function(n){return e.some((function(e){return e.rs===n}))})).map((function(e){return Object(q.jsx)(fe,{rs:e},"region_".concat(e))}));return Object(q.jsx)("div",{children:t})},he=new u.a,Oe=Object(s.a)((function(){return{regionList:{marginTop:50}}})),ge=function(){var e=Oe(),n=Object(r.useState)(!1),t=Object(o.a)(n,2),a=t[0],c=t[1];return Object(q.jsxs)(l.a,{client:he,children:[a?Object(q.jsx)(H,{onClose:function(){return c(!1)}}):null,Object(q.jsx)(se,{showAdministerDialog:function(){return c(!0)}}),Object(q.jsx)("div",{className:e.regionList,children:Object(q.jsx)(be,{})})]})},ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,229)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(ge,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/covid-historie",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/covid-historie","/service-worker.js");ve?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):xe(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):xe(n,e)}))}}({onUpdate:function(e){e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}),me()}},[[179,1,2]]]);
//# sourceMappingURL=main.5ea9b16d.chunk.js.map